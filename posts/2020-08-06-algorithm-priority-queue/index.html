<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="generator" content="Hugo 0.78.0" />

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>优先队列的实现 &middot; qinry&#39;s blog</title>
    <meta name="description" content=""/>

    
    <link type="text/css" rel="stylesheet" href="/css/print.css" media="print">
    <link type="text/css" rel="stylesheet" href="/css/poole.css">
    <link type="text/css" rel="stylesheet" href="/css/syntax.css">
    <link type="text/css" rel="stylesheet" href="/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


    
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">

    
    
</head>

<body class=" ">
<aside class="sidebar">
    <div class="container sidebar-sticky">
        <div class="sidebar-about">
            <a href="/"><h1>qinry&#39;s blog</h1></a>
            <p class="lead">
                 在此写下学习日志，努力充电中～ 
            </p>
        </div>

        <nav>
            <ul class="sidebar-nav">
                <li><a href="/">Home</a></li>
                <li><a href="/tags">tags</a></li>
                <li><a href="https://github.com/qinry"> Github </a></li>
            </ul>
        </nav>

        <p>&copy; 2020. All rights reserved.
            </p>
    </div>
</aside>

<main class="content container">
    <div class="post">
    <h1>优先队列的实现</h1>
    <time datetime=2020-08-06T21:36:55&#43;0800 class="post-date">Thu, Aug 6, 2020</time>
    <p><em>参考于《算法》第四版第二章第四节</em></p>
<h2 id="基于堆的优先队列">基于堆的优先队列</h2>
<p>API:
最大优先队列</p>
<p><code>public class MaxPQ&lt;Key extends Comparable&lt;Key&gt;&gt;</code></p>
<table>
<thead>
<tr>
<th>方法</th>
<th style="text-align:center">功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>MaxPQ(int max)</td>
<td style="text-align:center">创建一个初始容量为max的优先队列</td>
</tr>
<tr>
<td>void insert(Key x)</td>
<td style="text-align:center">向优先队列插入一个元素</td>
</tr>
<tr>
<td>Key delMax()</td>
<td style="text-align:center">删除最大元素并返回最大元素</td>
</tr>
<tr>
<td>boolean isEmpty()</td>
<td style="text-align:center">返回队列是否为空</td>
</tr>
<tr>
<td>int size()</td>
<td style="text-align:center">返回优先队列的元素个数</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MaxPQ</span><span style="color:#f92672">&lt;</span>Key <span style="color:#66d9ef">extends</span> Comparable<span style="color:#f92672">&lt;</span>Key<span style="color:#f92672">&gt;&gt;</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> Key<span style="color:#f92672">[]</span> pq<span style="color:#f92672">;</span>                    <span style="color:#75715e">// 基于堆的完全二叉树
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> N <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>                   <span style="color:#75715e">// 存储于pq[1..N]中，pq[0]没有使用
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">MaxPQ</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> maxN<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        pq <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Key<span style="color:#f92672">[])</span> <span style="color:#66d9ef">new</span> Comparable<span style="color:#f92672">[</span>maxN <span style="color:#f92672">+</span> 1<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> n <span style="color:#f92672">==</span> 0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">size</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> N<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> Key <span style="color:#a6e22e">max</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> NoSuchElementException<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Priority queue underflow&#34;</span><span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> pq<span style="color:#f92672">[</span>1<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">insert</span><span style="color:#f92672">(</span>Key x<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

        pq<span style="color:#f92672">[++</span>n<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> x<span style="color:#f92672">;</span>
        swim<span style="color:#f92672">(</span>n<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> Key <span style="color:#a6e22e">delMax</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        Key max <span style="color:#f92672">=</span> pq<span style="color:#f92672">[</span>1<span style="color:#f92672">];</span> <span style="color:#75715e">// 从根结点得到最大元素
</span><span style="color:#75715e"></span>        exch<span style="color:#f92672">(</span>1<span style="color:#f92672">,</span> N<span style="color:#f92672">--);</span> <span style="color:#75715e">// 将其和最后一个结点交换
</span><span style="color:#75715e"></span>        pq<span style="color:#f92672">[</span>n<span style="color:#f92672">+</span>1<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span> <span style="color:#75715e">//防止对象游离
</span><span style="color:#75715e"></span>        sink<span style="color:#f92672">(</span>1<span style="color:#f92672">);</span> <span style="color:#75715e">// 恢复堆的有序性
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> max<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 辅助方法
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">swim</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> k<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>k <span style="color:#f92672">&gt;</span> 1 <span style="color:#f92672">&amp;&amp;</span> less<span style="color:#f92672">(</span>k<span style="color:#f92672">/</span>2<span style="color:#f92672">,</span> k<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
            exch<span style="color:#f92672">(</span>k<span style="color:#f92672">,</span> k<span style="color:#f92672">/</span>2<span style="color:#f92672">);</span>
            k <span style="color:#f92672">=</span> k<span style="color:#f92672">/</span>2<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sink</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> k<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>2<span style="color:#f92672">*</span>k <span style="color:#f92672">&lt;=</span> n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> 2<span style="color:#f92672">*</span>k<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>j <span style="color:#f92672">&lt;</span> n <span style="color:#f92672">&amp;&amp;</span> less<span style="color:#f92672">(</span>j<span style="color:#f92672">,</span> j<span style="color:#f92672">+</span>1<span style="color:#f92672">))</span> j<span style="color:#f92672">++;</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span>less<span style="color:#f92672">(</span>k<span style="color:#f92672">,</span> j<span style="color:#f92672">))</span> <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
            exch<span style="color:#f92672">(</span>k<span style="color:#f92672">,</span> j<span style="color:#f92672">);</span>
            k <span style="color:#f92672">=</span> j<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">less</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      <span style="color:#66d9ef">return</span> pq<span style="color:#f92672">[</span>i<span style="color:#f92672">].</span><span style="color:#a6e22e">compareTo</span><span style="color:#f92672">(</span>pq<span style="color:#f92672">[</span>j<span style="color:#f92672">])</span> <span style="color:#f92672">&lt;</span> 0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">exch</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Key swap <span style="color:#f92672">=</span> pq<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
        pq<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> pq<span style="color:#f92672">[</span>j<span style="color:#f92672">];</span>
        pq<span style="color:#f92672">[</span>j<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> swap<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>

</code></pre></div><p>最小优先队列
API:</p>
<p><code>public class MinPQ&lt;Key extends Comparable&lt;Key&gt;&gt;</code></p>
<table>
<thead>
<tr>
<th>方法</th>
<th style="text-align:center">功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>MinPQ(int max)</td>
<td style="text-align:center">创建一个初始容量为max的优先队列</td>
</tr>
<tr>
<td>void insert(Key x)</td>
<td style="text-align:center">向优先队列插入一个元素</td>
</tr>
<tr>
<td>Key delMin()</td>
<td style="text-align:center">删除最小元素并返回最小元素</td>
</tr>
<tr>
<td>boolean isEmpty()</td>
<td style="text-align:center">返回队列是否为空</td>
</tr>
<tr>
<td>int size()</td>
<td style="text-align:center">返回优先队列的元素个数</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MinPQ</span><span style="color:#f92672">&lt;</span>Key <span style="color:#66d9ef">extends</span> Comparable<span style="color:#f92672">&lt;</span>Key<span style="color:#f92672">&gt;&gt;</span> <span style="color:#f92672">{</span>
	 <span style="color:#66d9ef">private</span> Key<span style="color:#f92672">[]</span> pq<span style="color:#f92672">;</span>
   <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> N<span style="color:#f92672">=</span>0<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">MinPQ</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> initCapacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        pq <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Key<span style="color:#f92672">[])</span> <span style="color:#66d9ef">new</span> Comparable<span style="color:#f92672">[</span>initCapacity <span style="color:#f92672">+</span> 1<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> Key <span style="color:#a6e22e">delMin</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        Key min <span style="color:#f92672">=</span> pq<span style="color:#f92672">[</span>1<span style="color:#f92672">];</span>
        exch<span style="color:#f92672">(</span>1<span style="color:#f92672">,</span> N<span style="color:#f92672">--);</span>
        pq<span style="color:#f92672">[</span>N<span style="color:#f92672">+</span>1<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>     
        sink<span style="color:#f92672">(</span>1<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> min<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">swim</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> k<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>k <span style="color:#f92672">&gt;</span> 1 <span style="color:#f92672">&amp;&amp;</span> greater<span style="color:#f92672">(</span>k<span style="color:#f92672">/</span>2<span style="color:#f92672">,</span> k<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
            exch<span style="color:#f92672">(</span>k<span style="color:#f92672">,</span> k<span style="color:#f92672">/</span>2<span style="color:#f92672">);</span>
            k <span style="color:#f92672">=</span> k<span style="color:#f92672">/</span>2<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sink</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> k<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>2<span style="color:#f92672">*</span>k <span style="color:#f92672">&lt;=</span> n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> 2<span style="color:#f92672">*</span>k<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>j <span style="color:#f92672">&lt;</span> n <span style="color:#f92672">&amp;&amp;</span> greater<span style="color:#f92672">(</span>j<span style="color:#f92672">,</span> j<span style="color:#f92672">+</span>1<span style="color:#f92672">))</span> j<span style="color:#f92672">++;</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span>greater<span style="color:#f92672">(</span>k<span style="color:#f92672">,</span> j<span style="color:#f92672">))</span> <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
            exch<span style="color:#f92672">(</span>k<span style="color:#f92672">,</span> j<span style="color:#f92672">);</span>
            k <span style="color:#f92672">=</span> j<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">greater</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      <span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>pq<span style="color:#f92672">[</span>i<span style="color:#f92672">]).</span><span style="color:#a6e22e">compareTo</span><span style="color:#f92672">(</span>pq<span style="color:#f92672">[</span>j<span style="color:#f92672">])</span> <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>


    <span style="color:#75715e">// isEmpty()、size()、insert()、exch()于MaxPQ的方法一样
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>
</code></pre></div><p>索引最大优先队列
API:</p>
<p><code>public class IndexMinPQ&lt;Item extends Comparable&lt;Item&gt;&gt;</code></p>
<table>
<thead>
<tr>
<th>方法</th>
<th style="text-align:center">功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>IndexMinPQ(int maxN)</td>
<td style="text-align:center">创建一个初始容量为max的优先队列</td>
</tr>
<tr>
<td>void insert(int k, Item item)</td>
<td style="text-align:center">插入一个元素，将它和索引k相关联</td>
</tr>
<tr>
<td>void change(int k, Item item)</td>
<td style="text-align:center">将索引k的元素设备item</td>
</tr>
<tr>
<td>boolean contains(int k)</td>
<td style="text-align:center">是否存在索引为k的元素</td>
</tr>
<tr>
<td>void delete(int k)</td>
<td style="text-align:center">删去索引k及其相关联的元素</td>
</tr>
<tr>
<td>Item min()</td>
<td style="text-align:center">返回最小元素</td>
</tr>
<tr>
<td>int minIndex()</td>
<td style="text-align:center">返回最小元素的索引</td>
</tr>
<tr>
<td>int delMin()</td>
<td style="text-align:center">删除最大元素并返回它的索引</td>
</tr>
<tr>
<td>boolean isEmpty()</td>
<td style="text-align:center">返回队列是否为空</td>
</tr>
<tr>
<td>int size()</td>
<td style="text-align:center">返回优先队列的元素个数</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">IndexMinPQ</span><span style="color:#f92672">&lt;</span>Item <span style="color:#66d9ef">extends</span> Comparable<span style="color:#f92672">&lt;</span>Item<span style="color:#f92672">&gt;&gt;{</span>
	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> N<span style="color:#f92672">;</span> <span style="color:#75715e">// PQ中元素数量
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> pq<span style="color:#f92672">;</span> <span style="color:#75715e">// 索引二叉堆，由1开始
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> qp<span style="color:#f92672">;</span> <span style="color:#75715e">// 逆序：qp[pq[i]] = pq[qp[i]] = i
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">private</span> Item<span style="color:#f92672">[]</span> items<span style="color:#f92672">;</span> <span style="color:#75715e">// 有优先级之分的元素
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">public</span> <span style="color:#a6e22e">IndexMinPQ</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> maxN<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		items <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Item<span style="color:#f92672">[])</span><span style="color:#66d9ef">new</span> Comparable<span style="color:#f92672">[</span>maxN <span style="color:#f92672">+</span> 1<span style="color:#f92672">];</span>
		pq <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>maxN <span style="color:#f92672">+</span> 1<span style="color:#f92672">];</span>
		qp <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>maxN <span style="color:#f92672">+</span> 1<span style="color:#f92672">];</span>
		<span style="color:#66d9ef">for</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;=</span> maxN<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> qp<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">return</span> N <span style="color:#f92672">==</span> 0<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">size</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">return</span> N<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">contains</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> k<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">return</span> qp<span style="color:#f92672">[</span>k<span style="color:#f92672">]</span> <span style="color:#f92672">!=</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">insert</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> k<span style="color:#f92672">,</span> Item item<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		N<span style="color:#f92672">++;</span>
		qp<span style="color:#f92672">[</span>k<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> N<span style="color:#f92672">;</span>
		pq<span style="color:#f92672">[</span>N<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> k<span style="color:#f92672">;</span>
	  items<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> item<span style="color:#f92672">;</span>
		swim<span style="color:#f92672">(</span>N<span style="color:#f92672">);</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">public</span> Item <span style="color:#a6e22e">min</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">return</span> items<span style="color:#f92672">[</span>pq<span style="color:#f92672">[</span>1<span style="color:#f92672">]];</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">delMin</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">int</span> indexOfMin <span style="color:#f92672">=</span> pq<span style="color:#f92672">[</span>1<span style="color:#f92672">];</span>
		exch<span style="color:#f92672">(</span>1<span style="color:#f92672">,</span> N<span style="color:#f92672">--);</span>
		sink<span style="color:#f92672">(</span>1<span style="color:#f92672">);</span>
		items<span style="color:#f92672">[</span>pq<span style="color:#f92672">[</span>N<span style="color:#f92672">+</span>1<span style="color:#f92672">]]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
		qp<span style="color:#f92672">[</span>pq<span style="color:#f92672">[</span>N<span style="color:#f92672">+</span>1<span style="color:#f92672">]]</span> <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
		<span style="color:#66d9ef">return</span> indexOfMin<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">minIndex</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">return</span> pq<span style="color:#f92672">[</span>1<span style="color:#f92672">];</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">change</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> k<span style="color:#f92672">,</span> Item item<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		items<span style="color:#f92672">[</span>k<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> item<span style="color:#f92672">;</span>
    swim<span style="color:#f92672">(</span>qp<span style="color:#f92672">[</span>k<span style="color:#f92672">]);</span>
    sink<span style="color:#f92672">(</span>qp<span style="color:#f92672">[</span>k<span style="color:#f92672">]);</span>
	<span style="color:#f92672">}</span>


	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">delete</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> k<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">int</span> index <span style="color:#f92672">=</span> qp<span style="color:#f92672">[</span>k<span style="color:#f92672">];</span>
		exch<span style="color:#f92672">(</span>index<span style="color:#f92672">,</span> N<span style="color:#f92672">--);</span>
		swim<span style="color:#f92672">(</span>index<span style="color:#f92672">);</span>
		sink<span style="color:#f92672">(</span>index<span style="color:#f92672">);</span>
		items<span style="color:#f92672">[</span>k<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
		qp<span style="color:#f92672">[</span>k<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">swim</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> k<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">while</span><span style="color:#f92672">(</span>k <span style="color:#f92672">&gt;</span> 1 <span style="color:#f92672">&amp;&amp;</span> greater<span style="color:#f92672">(</span>k<span style="color:#f92672">/</span>2<span style="color:#f92672">,</span> k<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
			exch<span style="color:#f92672">(</span>k<span style="color:#f92672">,</span> k<span style="color:#f92672">/</span>2<span style="color:#f92672">);</span>
			k <span style="color:#f92672">=</span> k<span style="color:#f92672">/</span>2<span style="color:#f92672">;</span>
		<span style="color:#f92672">}</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sink</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> k<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">while</span><span style="color:#f92672">(</span>2<span style="color:#f92672">*</span>k <span style="color:#f92672">&lt;=</span> n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
			<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> 2<span style="color:#f92672">*</span>k<span style="color:#f92672">;</span>
			<span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>j <span style="color:#f92672">&lt;</span> n <span style="color:#f92672">&amp;&amp;</span> greater<span style="color:#f92672">(</span>j<span style="color:#f92672">,</span> j <span style="color:#f92672">+</span> 1<span style="color:#f92672">))</span> j<span style="color:#f92672">++;</span>
			<span style="color:#66d9ef">if</span><span style="color:#f92672">(!</span>greater<span style="color:#f92672">(</span>k<span style="color:#f92672">,</span> j<span style="color:#f92672">))</span> <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
			exch<span style="color:#f92672">(</span>k<span style="color:#f92672">,</span> j<span style="color:#f92672">);</span>
			k <span style="color:#f92672">=</span> j<span style="color:#f92672">;</span>
		<span style="color:#f92672">}</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">greater</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">return</span> items<span style="color:#f92672">[</span>pq<span style="color:#f92672">[</span>i<span style="color:#f92672">]].</span><span style="color:#a6e22e">compareTo</span><span style="color:#f92672">(</span>items<span style="color:#f92672">[</span>pq<span style="color:#f92672">[</span>j<span style="color:#f92672">]])</span> <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">exch</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">int</span> swap <span style="color:#f92672">=</span> pq<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
		pq<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> pq<span style="color:#f92672">[</span>j<span style="color:#f92672">];</span>
		pq<span style="color:#f92672">[</span>j<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> swap<span style="color:#f92672">;</span>
		qp<span style="color:#f92672">[</span>pq<span style="color:#f92672">[</span>i<span style="color:#f92672">]]</span> <span style="color:#f92672">=</span> i<span style="color:#f92672">;</span>
		qp<span style="color:#f92672">[</span>pq<span style="color:#f92672">[</span>j<span style="color:#f92672">]]</span> <span style="color:#f92672">=</span> j<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>
</code></pre></div><p>索引最大优先队列
API:</p>
<p><code>public class IndexMaxPQ&lt;Item extends Comparable&lt;Item&gt;&gt;</code></p>
<table>
<thead>
<tr>
<th>方法</th>
<th style="text-align:center">功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>IndexMaxPQ(int maxN)</td>
<td style="text-align:center">创建一个初始容量为max的优先队列</td>
</tr>
<tr>
<td>void insert(int k, Item item)</td>
<td style="text-align:center">插入一个元素，将它和索引k相关联</td>
</tr>
<tr>
<td>void change(int k, Item item)</td>
<td style="text-align:center">将索引k的元素设备item</td>
</tr>
<tr>
<td>boolean contains(int k)</td>
<td style="text-align:center">是否存在索引为k的元素</td>
</tr>
<tr>
<td>void delete(int k)</td>
<td style="text-align:center">删去索引k及其相关联的元素</td>
</tr>
<tr>
<td>Item max()</td>
<td style="text-align:center">返回最小元素</td>
</tr>
<tr>
<td>int maxIndex()</td>
<td style="text-align:center">返回最小元素的索引</td>
</tr>
<tr>
<td>int delMax()</td>
<td style="text-align:center">删除最大元素并返回它的索引</td>
</tr>
<tr>
<td>boolean isEmpty()</td>
<td style="text-align:center">返回队列是否为空</td>
</tr>
<tr>
<td>int size()</td>
<td style="text-align:center">返回优先队列的元素个数</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">IndexMaxPQ</span><span style="color:#f92672">&lt;</span>Item <span style="color:#66d9ef">extends</span> Comparable<span style="color:#f92672">&lt;</span>Item<span style="color:#f92672">&gt;&gt;</span> <span style="color:#f92672">{</span>
	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> N<span style="color:#f92672">;</span>
	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> pq<span style="color:#f92672">;</span>
	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> qp<span style="color:#f92672">;</span>  
	<span style="color:#66d9ef">private</span> Item<span style="color:#f92672">[]</span> items<span style="color:#f92672">;</span>

	<span style="color:#66d9ef">public</span> <span style="color:#a6e22e">IndexMaxPQ</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> maxN<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		items <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Item<span style="color:#f92672">[])</span><span style="color:#66d9ef">new</span> Comparable<span style="color:#f92672">[</span>maxN <span style="color:#f92672">+</span> 1<span style="color:#f92672">];</span>
		pq <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>maxN <span style="color:#f92672">+</span> 1<span style="color:#f92672">];</span>
		qp <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>maxN <span style="color:#f92672">+</span> 1<span style="color:#f92672">];</span>
		<span style="color:#66d9ef">for</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;=</span> maxN<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span>
			qp<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">maxIndex</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">return</span> pq<span style="color:#f92672">[</span>1<span style="color:#f92672">];</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">public</span> Item <span style="color:#a6e22e">max</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">return</span> items<span style="color:#f92672">[</span>pq<span style="color:#f92672">[</span>1<span style="color:#f92672">]];</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">delMax</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">int</span> indexMax <span style="color:#f92672">=</span> pq<span style="color:#f92672">[</span>1<span style="color:#f92672">];</span>
		exch<span style="color:#f92672">(</span>1<span style="color:#f92672">,</span> N<span style="color:#f92672">--);</span>
		sink<span style="color:#f92672">(</span>1<span style="color:#f92672">);</span>
		items<span style="color:#f92672">[</span>pq<span style="color:#f92672">[</span>N<span style="color:#f92672">+</span>1<span style="color:#f92672">]]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
		qp<span style="color:#f92672">[</span>pq<span style="color:#f92672">[</span>N<span style="color:#f92672">+</span>1<span style="color:#f92672">]]</span> <span style="color:#f92672">=</span>  <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
		<span style="color:#66d9ef">return</span> indexMax<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>

  <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">swim</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> k<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>k <span style="color:#f92672">&gt;</span> 1 <span style="color:#f92672">&amp;&amp;</span> less<span style="color:#f92672">(</span>k<span style="color:#f92672">/</span>2<span style="color:#f92672">,</span> k<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
          exch<span style="color:#f92672">(</span>k<span style="color:#f92672">,</span> k<span style="color:#f92672">/</span>2<span style="color:#f92672">);</span>
          k <span style="color:#f92672">=</span> k<span style="color:#f92672">/</span>2<span style="color:#f92672">;</span>
      <span style="color:#f92672">}</span>
  <span style="color:#f92672">}</span>

  <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sink</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> k<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>2<span style="color:#f92672">*</span>k <span style="color:#f92672">&lt;=</span> n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
          <span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> 2<span style="color:#f92672">*</span>k<span style="color:#f92672">;</span>
          <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>j <span style="color:#f92672">&lt;</span> n <span style="color:#f92672">&amp;&amp;</span> less<span style="color:#f92672">(</span>j<span style="color:#f92672">,</span> j<span style="color:#f92672">+</span>1<span style="color:#f92672">))</span> j<span style="color:#f92672">++;</span>
          <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span>less<span style="color:#f92672">(</span>k<span style="color:#f92672">,</span> j<span style="color:#f92672">))</span> <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
          exch<span style="color:#f92672">(</span>k<span style="color:#f92672">,</span> j<span style="color:#f92672">);</span>
          k <span style="color:#f92672">=</span> j<span style="color:#f92672">;</span>
      <span style="color:#f92672">}</span>
  <span style="color:#f92672">}</span>

	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">less</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">return</span> items<span style="color:#f92672">[</span>pq<span style="color:#f92672">[</span>i<span style="color:#f92672">]].</span><span style="color:#a6e22e">compareTo</span><span style="color:#f92672">(</span>keys<span style="color:#f92672">[</span>pq<span style="color:#f92672">[</span>j<span style="color:#f92672">]])</span> <span style="color:#f92672">&lt;</span> 0<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>

  <span style="color:#75715e">// insert()、change()、contains()、delete()、isEmpty()、size()、和exch()与IndexMinPQ的一样
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>
</code></pre></div>
</div>


</main>




</body>
</html>
