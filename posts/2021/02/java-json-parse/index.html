<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <link href="https://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.85.0" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>JSON解析 &middot; 欢迎来到槎城小子的博客！</title>
  <meta name="description" content="JSON在Java中的使用，将Java对象转换为JSON用于语言无关的数据交换在网络传输中帮助非常大" />

  
  <link type="text/css" rel="stylesheet" href="https://qinry.github.io/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="https://qinry.github.io/css/poole.css">
  <link type="text/css" rel="stylesheet" href="https://qinry.github.io/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="https://qinry.github.io/css/hyde.css">
  <link type="text/css" rel="stylesheet" href="https://qinry.github.io/css/copy-code-button.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../../apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="../../../../favicon.png">

  
  <link href="https://cdn.bootcdn.net/ajax/libs/highlight.js/11.1.0/styles/base16/monokai.min.css" rel="stylesheet">

<script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/11.1.0/highlight.min.js"></script>

<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
<script src="../../../../js/copy-code-button.js"></script>
<script>
    hljs.highlightAll();
</script>


</head>

  <body class="theme-base-0d ">
    <span id="top"></span>
    <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="https://qinry.github.io/"><h1>欢迎来到槎城小子的博客！</h1></a>
      <p class="lead">
       不积硅步无以至千里，不积小流无以成江海。 
      </p>
    </div>
    
    <nav>
      <ul class="sidebar-nav">
        <li><a href="https://qinry.github.io/">Home</a> </li>
        <li><a href="https://github.com/qinry"> Github </a></li><li><a href="../../../../tags"> 分类标签 </a></li>
      </ul>
    </nav>

    <p>Copyright © 2021 槎城小子</p>
  </div>
</aside>

    
<aside class="post-toc right-0" style="position:fixed;top: 20px;">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#一json概述">一、JSON概述</a></li>
    <li><a href="#二语法">二、语法</a></li>
    <li><a href="#三解析">三、解析</a>
      <ul>
        <li><a href="#gson的使用">Gson的使用</a></li>
        <li><a href="#fastjson的使用">Fastjson的使用</a></li>
      </ul>
    </li>
  </ul>
</nav>
    
</aside>


    <main class="content container">
    <div class="post">

  <h1>JSON解析</h1>
  <span class="post-date">
    2021-02-08 12:47 &nbsp;
    字数：<strong>2434</strong> &nbsp;
    标签：
              <a href="https://qinry.github.io/tags/java/">Java</a>&nbsp;
  </span>

  <h2 id="一json概述">一、JSON概述</h2>
<p>JSON(JavaScriptObject Notation, JS 对象简谱) 是一种轻量级的数据交换格式。它基于 ECMAScript (欧洲计算机协会制定的js规范)的一个子集，采用完全独立于编程语言的文本格式来存储和表示数据。简洁和清晰的层次结构使得 JSON 成为理想的数据交换语言。 易于人阅读和编写，同时也易于机器解析和生成，并有效地提升网络传输效率。已经替代了过去使用的XML，作为流行的数据传输格式。</p>
<h2 id="二语法">二、语法</h2>
<p>实例：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
    <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;约翰克里斯托夫&#34;</span>,
    <span style="color:#f92672">&#34;info&#34;</span>: <span style="color:#e6db74">&#34;德国批判主义音乐家的一生&#34;</span>,
    <span style="color:#f92672">&#34;price&#34;</span>: <span style="color:#ae81ff">102</span>
}
</code></pre></div><p>一对<code>{}</code>表示一个对象，对象里面可以有很多属性，用键值对表示。键必须是用<code>&quot;&quot;</code>包围的字符串，值可以是字符串、对象、数字、布尔值（true/false）、null和数组。</p>
<p>一对<code>[]</code>表示一个数组，里面可以包含任何类型，比如字符串、数字、对象、布尔值、null，还可以内嵌一个数组，它们之间用<code>,</code>分开就可以了，例如：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">[<span style="color:#e6db74">&#34;a&#34;</span>, <span style="color:#ae81ff">1</span>, { <span style="color:#f92672">&#34;name&#34;</span>:<span style="color:#e6db74">&#34;zhangsan&#34;</span>, <span style="color:#f92672">&#34;age&#34;</span>:<span style="color:#ae81ff">18</span> }, [<span style="color:#ae81ff">3</span>, <span style="color:#66d9ef">true</span>, <span style="color:#66d9ef">null</span>, <span style="color:#ae81ff">3.14</span>]]
</code></pre></div><p>特殊地，单独的数组、数字、字符串都是合法的。例如：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">[<span style="color:#e6db74">&#34;佳得乐&#34;</span>, <span style="color:#e6db74">&#34;可乐&#34;</span>, <span style="color:#e6db74">&#34;尖叫&#34;</span>]
<span style="color:#ae81ff">3.14</span>
<span style="color:#ae81ff">3</span>
<span style="color:#66d9ef">true</span>
<span style="color:#e6db74">&#34;hello json&#34;</span>
</code></pre></div><h2 id="三解析">三、解析</h2>
<p>Java由于官方没有提供解析JSON的类库，但有两个知名的第三方库，Gson和Fastjson。Gson 是 Google 提供的用来在 Java 对象和 JSON 数据之间进行映射的 Java 类库。Fastjson 是一个性能很好的 Java 语言实现的 JSON 解析器和生成器，来自阿里巴巴的工程师开发。</p>
<h3 id="gson的使用">Gson的使用</h3>
<ol>
<li>根据Gson的github地址<a href="https://github.com/google/gson/">https://github.com/google/gson/</a>，下载jar包并导入到自己的项目中。</li>
</ol>
<p><img src="../../../../images/posts/2021/02/java-json-parse/1.png" alt="picture"></p>
<p>点击Gson jar downloads进入下一个页面</p>
<p><img src="../../../../images/posts/2021/02/java-json-parse/2.png" alt="picture"></p>
<p>点击Downloads&gt;jar下载。</p>
<ol>
<li>导入IDEA</li>
</ol>
<p>在项目的根目录添加新文件夹<code>lib</code>，把包添加到这里。如下一系列图所示：</p>
<p><img src="../../../../images/posts/2021/02/java-json-parse/3.png" alt="picture"></p>
<p><img src="../../../../images/posts/2021/02/java-json-parse/4.png" alt="picture"></p>
<p><img src="../../../../images/posts/2021/02/java-json-parse/5.png" alt="picture"></p>
<p><img src="../../../../images/posts/2021/02/java-json-parse/6.png" alt="picture"></p>
<p>如果模块有你导入的模块，可以忽略这一步，没有如下进行：</p>
<p><img src="../../../../images/posts/2021/02/java-json-parse/7.png" alt="picture"></p>
<p><img src="../../../../images/posts/2021/02/java-json-parse/8.png" alt="picture"></p>
<p><img src="../../../../images/posts/2021/02/java-json-parse/9.png" alt="picture"></p>
<ol>
<li>使用Gson</li>
</ol>
<p>gson有两个常用的方法，解析json的fromJson方法，生成json的toJson方法。</p>
<p>用法示例：</p>
<p>定义JSON解析和生成会用到的类型：</p>
<pre><code>import java.util.Objects;

/**
 * @Author: lixiaoqin
 * @Description:
 * @Date Created in 2021-02 23:56
 * @Modified By:
 */
public class Book {
    private String id;
    private String name;
    private String info;

    @Override
    public String toString() {
        return &quot;Book{&quot; +
                &quot;id='&quot; + id + '\'' +
                &quot;, name='&quot; + name + '\'' +
                &quot;, info='&quot; + info + '\'' +
                '}';
    }

    public Book(String id, String name, String info) {
        this.id = id;
        this.name = name;
        this.info = info;
    }

    public Book() {
    }

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getInfo() {
        return info;
    }

    public void setInfo(String info) {
        this.info = info;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;
        Book book = (Book) o;
        return id.equals(book.id) &amp;&amp;
                name.equals(book.name) &amp;&amp;
                info.equals(book.info);
    }

    @Override
    public int hashCode() {
        return Objects.hash(id, name, info);
    }
}

</code></pre><hr>
<p>解析json，生成对象</p>
<pre><code>import com.google.gson.Gson;
import java.util.HashMap;

/**
 * @Author: lixiaoqin
 * @Description:
 * @Date Created in 2021-02 23:54
 * @Modified By:
 */
public class ResolveJSONByGson {
    public static void main(String[] args) {
        Gson g = new Gson();
        // {&quot;id&quot;:&quot;1001&quot;,&quot;info&quot;:&quot;德国批判主义音乐家的一生&quot;,&quot;name&quot;:&quot;约翰克里斯托弗&quot;}
        // {&quot;drink&quot;: [&quot;佳得乐&quot;, &quot;可乐&quot;, &quot;尖叫&quot;]}
        Book book = g.fromJson(&quot;{\&quot;id\&quot;:\&quot;1001\&quot;,\&quot;info\&quot;:\&quot;德国批判主义音乐家的一生\&quot;,\&quot;name\&quot;:\&quot;约翰克里斯托弗\&quot;}&quot;, Book.class);
        System.out.println(book.getId());

        HashMap hashMap = g.fromJson(&quot;{\&quot;drink\&quot;: [\&quot;佳得乐\&quot;, \&quot;可乐\&quot;, \&quot;尖叫\&quot;]}&quot;, HashMap.class);
        System.out.println(hashMap.get(&quot;drink&quot;).getClass());

    }
}
</code></pre><p>输出：</p>
<pre><code>1001
class java.util.ArrayList
</code></pre><p>生成json</p>
<pre><code>import com.google.gson.Gson;

/**
 * @Author: lixiaoqin
 * @Description:
 * @Date Created in 2021-02 23:52
 * @Modified By:
 */
public class CreateSJONByGson {
    public static void main(String[] args) {
        Book book = new Book(&quot;1001&quot;, &quot;约翰克里斯托弗&quot;, &quot;德国批判主义音乐家的一生&quot;);
        Gson g = new Gson();
        String json = g.toJson(book);
        System.out.println(json);
    }
}
</code></pre><p>输出：</p>
<pre><code>{&quot;id&quot;:&quot;1001&quot;,&quot;name&quot;:&quot;约翰克里斯托弗&quot;,&quot;info&quot;:&quot;德国批判主义音乐家的一生&quot;}
</code></pre><hr>
<h3 id="fastjson的使用">Fastjson的使用</h3>
<p><a href="https://github.com/alibaba/fastjson">Fastjson</a>的用法与Gson类似，下载和导包如上所述，这里就不过多赘述。</p>
<p>解析json</p>
<pre><code>import com.alibaba.fastjson.JSON;
import java.util.List;

/**
 * @Author: lixiaoqin
 * @Description:
 * @Date Created in 2021-02 23:54
 * @Modified By:
 */
public class ResolveJSONByFastJson {
    public static void main(String[] args) {
        // {&quot;id&quot;:&quot;1001&quot;,&quot;info&quot;:&quot;德国批判主义音乐家的一生&quot;,&quot;name&quot;:&quot;约翰克里斯托弗&quot;}
        // {&quot;drink&quot;: [&quot;佳得乐&quot;, &quot;可乐&quot;, &quot;尖叫&quot;]}

        Book book = JSON.parseObject(&quot;{\&quot;id\&quot;:\&quot;1001\&quot;,\&quot;info\&quot;:\&quot;德国批判主义音乐家的一生\&quot;,\&quot;name\&quot;:\&quot;约翰克里斯托弗\&quot;}&quot;, Book.class);
        System.out.println(book.getId());

        List&lt;String&gt; strings = JSON.parseArray(&quot;[\&quot;佳得乐\&quot;, \&quot;可乐\&quot;, \&quot;尖叫\&quot;]&quot;, String.class);
        System.out.println(strings);
    }
}
</code></pre><p>输出：</p>
<pre><code>1001
[佳得乐, 可乐, 尖叫]
</code></pre><p>Gson和Fastjson一样解析json数组生成的是java的ArrayList对象。</p>
<p>生成json</p>
<pre><code>import com.alibaba.fastjson.JSON;

/**
 * @Author: lixiaoqin
 * @Description:
 * @Date Created in 2021-02 23:53
 * @Modified By:
 */
public class CreateJSONByFastJson {
    public static void main(String[] args) {
        Book book = new Book(&quot;1001&quot;, &quot;约翰克里斯托弗&quot;, &quot;德国批判主义音乐家的一生&quot;);
        String json = JSON.toJSONString(book);
        System.out.println(json);
    }
}
</code></pre><p>输出：</p>
<pre><code>{&quot;id&quot;:&quot;1001&quot;,&quot;info&quot;:&quot;德国批判主义音乐家的一生&quot;,&quot;name&quot;:&quot;约翰克里斯托弗&quot;}
</code></pre>
</div>


    </main>
    <a href="#top" class="backtop">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-circle-up" class="svg-inline--fa fa-chevron-circle-up fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
    <path fill="currentColor" d="M8 256C8 119 119 8 256 8s248 111 248 248-111 248-248 248S8 393 8 256zm231-113.9L103.5 277.6c-9.4 9.4-9.4 24.6 0 33.9l17 17c9.4 9.4 24.6 9.4 33.9 0L256 226.9l101.6 101.6c9.4 9.4 24.6 9.4 33.9 0l17-17c9.4-9.4 9.4-24.6 0-33.9L273 142.1c-9.4-9.4-24.6-9.4-34 0z">
    </path>
    </svg>
</a>
    
      
    
  </body>
</html>
